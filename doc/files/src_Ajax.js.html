<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\Ajax.js - OOGL.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="OOGL.js"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/context.AjaxFragmentShader.html">context.AjaxFragmentShader</a></li>
            
                <li><a href="../classes/context.AjaxProgram.html">context.AjaxProgram</a></li>
            
                <li><a href="../classes/context.AjaxVertexShader.html">context.AjaxVertexShader</a></li>
            
                <li><a href="../classes/context.ArrayBuffer.html">context.ArrayBuffer</a></li>
            
                <li><a href="../classes/context.AsyncCubeMap.html">context.AsyncCubeMap</a></li>
            
                <li><a href="../classes/context.AsyncTexture.html">context.AsyncTexture</a></li>
            
                <li><a href="../classes/context.AttributeArray1.html">context.AttributeArray1</a></li>
            
                <li><a href="../classes/context.AttributeArray2.html">context.AttributeArray2</a></li>
            
                <li><a href="../classes/context.AttributeArray3.html">context.AttributeArray3</a></li>
            
                <li><a href="../classes/context.AttributeArray4.html">context.AttributeArray4</a></li>
            
                <li><a href="../classes/context.AttributeArrays.html">context.AttributeArrays</a></li>
            
                <li><a href="../classes/context.AutoProgram.html">context.AutoProgram</a></li>
            
                <li><a href="../classes/context.AutoTexture.html">context.AutoTexture</a></li>
            
                <li><a href="../classes/context.Buffer.html">context.Buffer</a></li>
            
                <li><a href="../classes/context.CubeMap.html">context.CubeMap</a></li>
            
                <li><a href="../classes/context.DynamicArrayBuffer.html">context.DynamicArrayBuffer</a></li>
            
                <li><a href="../classes/context.DynamicBuffer.html">context.DynamicBuffer</a></li>
            
                <li><a href="../classes/context.DynamicElementArrayBuffer.html">context.DynamicElementArrayBuffer</a></li>
            
                <li><a href="../classes/context.ElementArray.html">context.ElementArray</a></li>
            
                <li><a href="../classes/context.ElementArrayBuffer.html">context.ElementArrayBuffer</a></li>
            
                <li><a href="../classes/context.FragmentShader.html">context.FragmentShader</a></li>
            
                <li><a href="../classes/context.Framebuffer.html">context.Framebuffer</a></li>
            
                <li><a href="../classes/context.Loader.html">context.Loader</a></li>
            
                <li><a href="../classes/context.Loader.Assets.html">context.Loader.Assets</a></li>
            
                <li><a href="../classes/context.Program.html">context.Program</a></li>
            
                <li><a href="../classes/context.Renderbuffer.html">context.Renderbuffer</a></li>
            
                <li><a href="../classes/context.Shader.html">context.Shader</a></li>
            
                <li><a href="../classes/context.StaticArrayBuffer.html">context.StaticArrayBuffer</a></li>
            
                <li><a href="../classes/context.StaticBuffer.html">context.StaticBuffer</a></li>
            
                <li><a href="../classes/context.StaticElementArrayBuffer.html">context.StaticElementArrayBuffer</a></li>
            
                <li><a href="../classes/context.StreamArrayBuffer.html">context.StreamArrayBuffer</a></li>
            
                <li><a href="../classes/context.StreamBuffer.html">context.StreamBuffer</a></li>
            
                <li><a href="../classes/context.StreamElementArrayBuffer.html">context.StreamElementArrayBuffer</a></li>
            
                <li><a href="../classes/context.Texture.html">context.Texture</a></li>
            
                <li><a href="../classes/context.Texture2D.html">context.Texture2D</a></li>
            
                <li><a href="../classes/context.Textures.html">context.Textures</a></li>
            
                <li><a href="../classes/context.VertexShader.html">context.VertexShader</a></li>
            
                <li><a href="../classes/OOGL.Ajax.html">OOGL.Ajax</a></li>
            
                <li><a href="../classes/OOGL.Async.html">OOGL.Async</a></li>
            
                <li><a href="../classes/OOGL.Context.html">OOGL.Context</a></li>
            
                <li><a href="../classes/OOGL.IsometricProjection.html">OOGL.IsometricProjection</a></li>
            
                <li><a href="../classes/OOGL.Matrix2.html">OOGL.Matrix2</a></li>
            
                <li><a href="../classes/OOGL.Matrix3.html">OOGL.Matrix3</a></li>
            
                <li><a href="../classes/OOGL.Matrix4.html">OOGL.Matrix4</a></li>
            
                <li><a href="../classes/OOGL.OrthogonalProjection.html">OOGL.OrthogonalProjection</a></li>
            
                <li><a href="../classes/OOGL.PerspectiveProjection.html">OOGL.PerspectiveProjection</a></li>
            
                <li><a href="../classes/OOGL.RenderLoop.html">OOGL.RenderLoop</a></li>
            
                <li><a href="../classes/OOGL.RotationMatrix2.html">OOGL.RotationMatrix2</a></li>
            
                <li><a href="../classes/OOGL.RotationMatrix3.html">OOGL.RotationMatrix3</a></li>
            
                <li><a href="../classes/OOGL.RotationMatrix4.html">OOGL.RotationMatrix4</a></li>
            
                <li><a href="../classes/OOGL.ScalingMatrix2.html">OOGL.ScalingMatrix2</a></li>
            
                <li><a href="../classes/OOGL.ScalingMatrix3.html">OOGL.ScalingMatrix3</a></li>
            
                <li><a href="../classes/OOGL.ScalingMatrix4.html">OOGL.ScalingMatrix4</a></li>
            
                <li><a href="../classes/OOGL.Timing.html">OOGL.Timing</a></li>
            
                <li><a href="../classes/OOGL.TranslationMatrix4.html">OOGL.TranslationMatrix4</a></li>
            
                <li><a href="../classes/OOGL.Vector2.html">OOGL.Vector2</a></li>
            
                <li><a href="../classes/OOGL.Vector3.html">OOGL.Vector3</a></li>
            
                <li><a href="../classes/OOGL.Vector4.html">OOGL.Vector4</a></li>
            
                <li><a href="../classes/OOGL.XRotationMatrix3.html">OOGL.XRotationMatrix3</a></li>
            
                <li><a href="../classes/OOGL.XRotationMatrix4.html">OOGL.XRotationMatrix4</a></li>
            
                <li><a href="../classes/OOGL.YRotationMatrix3.html">OOGL.YRotationMatrix3</a></li>
            
                <li><a href="../classes/OOGL.YRotationMatrix4.html">OOGL.YRotationMatrix4</a></li>
            
                <li><a href="../classes/OOGL.ZRotationMatrix3.html">OOGL.ZRotationMatrix3</a></li>
            
                <li><a href="../classes/OOGL.ZRotationMatrix4.html">OOGL.ZRotationMatrix4</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/context.html">context</a></li>
            
                <li><a href="../modules/OOGL.html">OOGL</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\Ajax.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*global OOGL: false */

/**
 * @module OOGL
 */

/**
 * Provides methods for performing AJAX requests. Useful for loading assets such
 * as shaders.
 *
 * @class OOGL.Ajax
 * @static
 */
OOGL.Ajax = new (function () {
	var errorCallback = function () {};

	/**
	 * Lets the user define a callback function that gets called when an error
	 * related to an AJAX request occurs.
	 *
	 * @method onError
	 * @param callback {Function} A user-defined callback function that gets
	 *	called in case of an error in an AJAX request.
	 * @example
	 *	OOGL.Ajax.onError(function () {
	 *		alert(&#x27;AJAX error occurred.&#x27;);
	 *	});
	 */
	this.onError = function (callback) {
		errorCallback = callback || function () {};
	};

	function XHR(handler) {
		var xhr = (&#x27;XMLHttpRequest&#x27; in window) ? new XMLHttpRequest() : new ActiveXObject(&#x27;Microsoft.XMLHTTP&#x27;);
		xhr.onreadystatechange = handler;
		return xhr;
	}

	function makeRequest(method, settings) {
		var callback = settings.callback;
		var json = (settings.type === &#x27;json&#x27;);
		if (json) {
			settings.type = &#x27;&#x27;; // XXX the &quot;json&quot; type is not supported by the major browsers
		}
		var xhr = new XHR(function () {
			if (xhr.readyState === 4) {
				if (xhr.status === 200) {
					if (callback) {
						if (json) {
							callback(JSON.parse(xhr.responseText));
						} else {
							callback(xhr.response);
						}
					}
				} else {
					errorCallback();
				}
			}
		});
		var async = true;
		if (settings.hasOwnProperty(&#x27;async&#x27;)) {
			async = settings.async;
		}
		if (settings.hasOwnProperty(&#x27;data&#x27;)) {
			var encodedData = (function () {
				var parameters = {};
				(function encode(prefix, object) {
					if (typeof object !== &#x27;object&#x27;) {
						parameters[prefix] = &#x27;&#x27; + object;
					} else if (Array.isArray(object)) {
						if (object.length) {
							for (var i in object) {
								if (object.hasOwnProperty(i)) {
									encode(prefix + &#x27;[&#x27; + i + &#x27;]&#x27;, object[i]);
								}
							}
						} else {
							parameters[prefix] = &#x27;[]&#x27;;
						}
					} else if (object !== null) {
						if (Object.keys(object).length) {
							for (var key in object) {
								if (object.hasOwnProperty(key)) {
									if (/^\w+$/.test(key)) {
										encode(prefix + &#x27;.&#x27; + key, object[key]);
									} else {
										encode(prefix + &#x27;[\&quot;&#x27; + key.replace(&#x27;\&quot;&#x27;, &#x27;\\\&quot;&#x27;) + &#x27;\&quot;]&#x27;, object[key]);
									}
								}
							}
						} else {
							parameters[prefix] = &#x27;{}&#x27;;
						}
					} else {
						parameters[prefix] = &#x27;null&#x27;;
					}
				})(&#x27;&#x27;, settings.data);
				return (function (first) {
					var query = &#x27;&#x27;;
					for (var name in parameters) {
						if (parameters.hasOwnProperty(name)) {
							if (first) {
								first = false;
							} else {
								query += &#x27;&amp;&#x27;;
							}
							query += encodeURIComponent(name) + &#x27;=&#x27; + encodeURIComponent(parameters[name]);
						}
					}
					return query;
				})(true);
			})();
			if (/^get$/i.test(method)) {
				var url = settings.url + &#x27;?&#x27; + encodedData;
				if (settings.hasOwnProperty(&#x27;user&#x27;)) {
					if (settings.hasOwnProperty(&#x27;password&#x27;)) {
						xhr.open(method, url, async, settings.user, settings.password);
					} else {
						xhr.open(method, url, async, settings.user);
					}
				} else {
					xhr.open(method, url, async);
				}
				if (settings.hasOwnProperty(&#x27;type&#x27;)) {
					xhr.responseType = settings.type;
					if ((settings.type === &#x27;document&#x27;) &amp;&amp; xhr.overrideMimeType) {
						xhr.overrideMimeType(&#x27;text/xml&#x27;);
					}
				}
				xhr.send();
			} else {
				if (settings.hasOwnProperty(&#x27;user&#x27;)) {
					if (settings.hasOwnProperty(&#x27;password&#x27;)) {
						xhr.open(method, settings.url, async, settings.user, settings.password);
					} else {
						xhr.open(method, settings.url, async, settings.user);
					}
				} else {
					xhr.open(method, settings.url, async);
				}
				if (settings.hasOwnProperty(&#x27;type&#x27;)) {
					xhr.responseType = settings.type;
					if ((settings.type === &#x27;document&#x27;) &amp;&amp; xhr.overrideMimeType) {
						xhr.overrideMimeType(&#x27;text/xml&#x27;);
					}
				}
				xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;);
				xhr.send(encodedData);
			}
		} else {
			if (settings.hasOwnProperty(&#x27;user&#x27;)) {
				if (settings.hasOwnProperty(&#x27;password&#x27;)) {
					xhr.open(method, settings.url, async, settings.user, settings.password);
				} else {
					xhr.open(method, settings.url, async, settings.user);
				}
			} else {
				xhr.open(method, settings.url, async);
			}
			if (settings.hasOwnProperty(&#x27;type&#x27;)) {
				xhr.responseType = settings.type;
				if ((settings.type === &#x27;document&#x27;) &amp;&amp; xhr.overrideMimeType) {
					xhr.overrideMimeType(&#x27;text/xml&#x27;);
				}
			}
			xhr.send();
		}
	}

	function bindRequest(method) {
		function invalidArguments() {
			throw &#x27;invalid arguments for &#x27; + method + &#x27; AJAX request&#x27;;
		}
		return function (url, data, callback, type) {
			if (typeof url !== &#x27;object&#x27;) {
				var settings = {
					url: &#x27;&#x27; + url
				};
				if (typeof data !== &#x27;object&#x27;) {
					if (typeof data !== &#x27;function&#x27;) {
						invalidArguments();
					} else {
						settings.callback = data;
						settings.type = &#x27;&#x27; + callback;
						makeRequest(method, settings);
					}
				} else {
					settings.data = data;
					if (typeof callback !== &#x27;function&#x27;) {
						settings.type = &#x27;&#x27; + callback;
						makeRequest(method, settings);
					} else {
						settings.callback = callback;
						if (arguments.length &gt; 3) {
							settings.type = &#x27;&#x27; + type;
						}
						makeRequest(method, settings);
					}
				}
			} else {
				makeRequest(method, url);
			}
		};
	}

	function bindJSONRequest(method) {
		function invalidArguments() {
			throw &#x27;invalid arguments for &#x27; + method + &#x27; AJAX request&#x27;;
		}
		return function (url, data, callback) {
			var settings = {
				url: &#x27;&#x27; + url,
				type: &#x27;json&#x27;
			};
			if (typeof data !== &#x27;object&#x27;) {
				if (typeof data !== &#x27;function&#x27;) {
					invalidArguments();
				} else {
					settings.callback = data;
					makeRequest(method, settings);
				}
			} else {
				settings.data = data;
				if (arguments.length &gt; 2) {
					settings.callback = callback;
				}
				makeRequest(method, settings);
			}
		};
	}

	/**
	 * Performs a GET AJAX request. The data returned from the server is passed
	 * to a user-defined callback function.
	 *
	 * @method get
	 * @param url {String} The URL to request.
	 * @param [data] {Object} TODO
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 * @param [type] {String} TODO
	 * @example
	 *	OOGL.Ajax.get(&#x27;shaders/frag/box.frag&#x27;, function (source) {
	 *		fragmentShader = new oogl.FragmentShader(source);
	 *		// ...
	 *	});
	 */
	this.get = bindRequest(&#x27;GET&#x27;);

	/**
	 * Performs a GET AJAX request. The data returned from the server is parsed
	 * as JSON and passed to a user-defined callback function.
	 *
	 * @method getJSON
	 * @param url {String} url The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 * @example
	 *	OOGL.Ajax.getJSON(&#x27;meshes/box.json&#x27;, function (box) {
	 *		vertices = new oogl.VertexArray(0, 3, box.vertices);
	 *		textureCoordinates = new oogl.VertexArray(1, 2, box.textureCoordinates);
	 *		// ...
	 *	});
	 */
	this.getJSON = bindJSONRequest(&#x27;GET&#x27;);

	/**
	 * Performs a POST AJAX request. The data returned from the server is passed
	 * to a user-defined callback function.
	 *
	 * @method post
	 * @param url {String} The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 */
	this.post = bindRequest(&#x27;POST&#x27;);

	/**
	 * Performs a POST AJAX request. The data returned from the server is parsed
	 * as JSON and passed to a user-defined callback function.
	 *
	 * @method postJSON
	 * @param url {String} The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 */
	this.postJSON = bindJSONRequest(&#x27;POST&#x27;);

	/**
	 * Performs a PUT AJAX request. The data returned from the server is passed
	 * to a user-defined callback function.
	 *
	 * @method put
	 * @param url {String} The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 */
	this.put = bindRequest(&#x27;PUT&#x27;);

	/**
	 * Performs a PUT AJAX request. The data returned from the server is parsed
	 * as JSON and passed to a user-defined callback function.
	 *
	 * @method putJSON
	 * @param url {String} The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 */
	this.putJSON = bindJSONRequest(&#x27;PUT&#x27;);

	/**
	 * Performs a DELETE AJAX request. The data returned from the server is
	 * passed to a user-defined callback function.
	 *
	 * @method _delete
	 * @param url {String} The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 */
	this._delete = bindRequest(&#x27;DELETE&#x27;);

	/**
	 * Performs a DELETE AJAX request. The data returned from the server is
	 * parsed as JSON and passed to a user-defined callback function.
	 *
	 * @method deleteJSON
	 * @param url {String} The URL to request.
	 * @param [callback] {Function} An optional one-argument user-defined
	 *	callback function that is invoked when the request completes
	 *	successfully.
	 */
	this.deleteJSON = bindJSONRequest(&#x27;DELETE&#x27;);
})();

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
